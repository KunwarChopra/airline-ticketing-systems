
 CREATE OR REPLACE PROCEDURE MEMBERSHIPCOUNT
 (IN_MEMBER_TYPE IN VARCHAR2) 
AS CURSOR MEMBERSHIPDETAILS
 is 
select fs.AIRLINE_NAME,fS.FLIGHT_NUMBER,IR.PASSENGER_ID,p.FIRST_NAME,p.LAST_NAME,p.EMAIL_ID,P.PHONE_NUMBER,M.MEMBER_TYPE,FS.DEPARTURE_DATE_TIME from LEGS L, ITINERARY_LEGS IL, ITINERARY_RESERVATION IR, FLIGHT_SEGMENT fS,PASSENGERS p, MEMBERSHIP M, LOGIN_SIGNUP LS 
where LS.PHONE_NUMBER=M.PHONE_NUMBER AND LS.PHONE_NUMBER=P.PHONE_NUMBER AND IR.PASSENGER_ID=P.PASSENGER_ID AND IR.RESERVATION_ID=IL.RESERVATION_ID AND IL.LEG_ID = L.LEG_ID 
AND FS.FLIGHT_NUMBER = L.FLIGHT_NUMBER AND m.member_type=IN_MEMBER_TYPE; 
PASSDETAILS MEMBERSHIPDETAILS%rowtype; BEGIN Open MEMBERSHIPDETAILS ; 
 
LOOP fetch MEMBERSHIPDETAILS into PASSDETAILS; EXIT WHEN MEMBERSHIPDETAILS%NOTFOUND; 
dbms_output.put_line (PASSDETAILS.AIRLINE_NAME || ' ' || PASSDETAILS.FLIGHT_NUMBER || ' ' || PASSDETAILS.PASSENGER_ID || ' ' || PASSDETAILS.FIRST_NAME|| ' ' ||PASSDETAILS.LAST_NAME || ' ' || PASSDETAILS.EMAIL_ID || ' ' || PASSDETAILS.PHONE_NUMBER || ' ' || PASSDETAILS.MEMBER_TYPE || ' ' || PASSDETAILS.DEPARTURE_DATE_TIME); 
END LOOP; close MEMBERSHIPDETAILS; END MEMBERSHIPCOUNT; 
--Testing in sql developer: Oracle db-- SET SERVEROUTPUT ON exec MEMBERSHIPCOUNT('PLATINUM'); 
SET SERVEROUTPUT ON exec MEMBERSHIPCOUNT('SILVER'); 
SET SERVEROUTPUT ON exec MEMBERSHIPCOUNT('GOLD'); 
